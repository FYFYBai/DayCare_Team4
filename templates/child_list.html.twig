{% extends "master.html.twig" %}

{% block addHead %}
<!-- Load the custom stylesheet AFTER styles.css -->
<link rel="stylesheet" href="/public/custom.css">
{% endblock %}

{% block content %}
<div class="content-box">
    <h2>Your Children</h2>
    <a href="/child/new" class="btn btn-primary mb-3">Add Child</a>

    {% if children is not empty %}
        <table class="custom-table">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Date of Birth</th>
                    <th>Age</th>  <!-- New Age column -->
                    <th>Photo</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
            {% for child in children %}
                <tr>
                    <td>{{ child.name }}</td>
                    <td>{{ child.date_of_birth }}</td>
                    <td>{{ child.age }}</td> <!-- Display the calculated age -->
                    <td>
                        {% if child.profile_photo_path %}
                            <img src="/uploads/{{ child.profile_photo_path }}" alt="Child Photo" width="80">
                        {% else %}
                            No Photo
                        {% endif %}
                    </td>
                    <td>
                        <a href="/child/{{ child.id }}/edit" class="btn btn-primary">Edit</a>
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>You have not added any children yet.</p>
    {% endif %}
</div>
{% endblock %}
